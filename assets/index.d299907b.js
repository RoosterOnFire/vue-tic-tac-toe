import{l as e,c as t,a as r,u as n,d as a,b as s,e as l,t as i,o,f as c,r as u,g as d,F as p,h as y,i as m}from"./vendor.2d8dd9eb.js";const v=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];function b(e,t){return v.map((r=>r.map((t=>e[t])).every((e=>e.player===t)))).findIndex((e=>e))}function f(e){return e.map(((e,t)=>""===e.player?t:-1)).filter((e=>-1!==e))}function g(e,t){return G(e,t).move}function G(t,r,n=!0,a=0){const s=e.exports.cloneDeep(t),l=f(s).map((t=>{const{nextState:l,move:i}=function(t,r,n){const a=e.exports.cloneDeep(t);return a[n].player=r,{nextState:a,move:n}}(s,r,t),o=-1!==b(l,r),c=(o?n?100:-100:0)-a,u=f(l);if(o||0===u.length)return{score:c,move:i};return{score:c+G(l,function(e){return"X"===e?"O":"X"}(r),!n,a+1).score,move:i}}));return n?e.exports.maxBy(l,(e=>e.score)):e.exports.minBy(l,(e=>e.score))}const P=Symbol(),C=t({plugins:[r()],state:{currentPlayer:"X",playerOWinCount:0,playerXWinCount:0,isGameRunning:!1,isGameOver:!1,isAIActivate:!0,cells:[{id:0,player:"",hit:!1},{id:1,player:"",hit:!1},{id:2,player:"",hit:!1},{id:3,player:"",hit:!1},{id:4,player:"",hit:!1},{id:5,player:"",hit:!1},{id:6,player:"",hit:!1},{id:7,player:"",hit:!1},{id:8,player:"",hit:!1}]},getters:{isPlayerSelected:e=>""!==e.currentPlayer},mutations:{selectPlayer(e,t){e.currentPlayer=t},switchPlayer(e){e.currentPlayer="X"===e.currentPlayer?"O":"X"},updateCell(e,t){const r=e.cells.find((e=>t.id===e.id));r&&(r.player=e.currentPlayer)},updateGameOver(e){const t=b(e.cells,e.currentPlayer),r=e.cells.every((e=>""!==e.player));e.isGameOver=-1!==t||r,e.isGameOver&&!r&&(v[t].map((t=>e.cells[t].hit=!0)),"X"===e.currentPlayer?e.playerXWinCount+=1:"O"===e.currentPlayer&&(e.playerOWinCount+=1))},resetBoard(e){e.cells.forEach((e=>{e.player="",e.hit=!1})),e.currentPlayer="X",e.isGameRunning=!1,e.isGameOver=!1}},actions:{updateGame({commit:e,state:t},r){if(t.isGameRunning=!0,e("updateCell",r),e("updateGameOver"),t.isGameOver)setTimeout((()=>e("resetBoard")),1700);else{if(t.isAIActivate){e("switchPlayer");const r=g(t.cells,t.currentPlayer),n=t.cells.find((e=>e.id===r));n&&(e("updateCell",n),e("updateGameOver"),t.isGameOver&&setTimeout((()=>e("resetBoard")),1700))}e("switchPlayer")}},toggleAI({state:e}){e.isAIActivate=!e.isAIActivate},reset({commit:e}){e("resetBoard")},resetFull({commit:e,state:t}){e("resetBoard"),t.playerXWinCount=0,t.playerOWinCount=0,t.isAIActivate=!0}}});function O(){return n(P)}var h=a({setup(){const e=O();return{message:s((()=>`Current player: ${e.state.currentPlayer}`))}}});h.render=function(e,t,r,n,a,s){return o(),l("p",null,i(e.message),1)};var A=a({setup(){const e=O();return{buttonXText:s((()=>`X ${e.state.playerXWinCount||"-"}`)),buttonOText:s((()=>`O ${e.state.playerOWinCount||"-"}`)),isGameRunning:s((()=>e.state.isGameRunning)),selectPlayer(t){e.commit("selectPlayer",t)}}}});const X={class:"select-player"};A.render=function(e,t,r,n,a,s){return o(),l("div",X,[c("button",{class:"select-player__button",type:"button",onClick:t[1]||(t[1]=t=>e.selectPlayer("X")),disabled:e.isGameRunning},i(e.buttonXText),9,["disabled"]),c("button",{class:"select-player__button",type:"button",onClick:t[2]||(t[2]=t=>e.selectPlayer("O")),disabled:e.isGameRunning},i(e.buttonOText),9,["disabled"])])};var B=a({components:{SelectPlayer:A,CurrentPlayer:h},setup(){}});const x={class:"header"};B.render=function(e,t,r,n,a,s){const i=u("SelectPlayer"),d=u("CurrentPlayer");return o(),l("div",x,[c(i),c(d)])};var I=a({props:{cell:{type:Object,required:!0}},setup(e){const{cell:t}=d(e),r=O();return{cell:t,isDisabled:s((()=>!!t.value.player||r.state.isGameOver)),updateCell(){r.dispatch("updateGame",t.value)}}}});I.render=function(e,t,r,n,a,s){return o(),l("button",{id:e.cell.id.toString(),disabled:e.isDisabled,onClick:t[1]||(t[1]=(...t)=>e.updateCell&&e.updateCell(...t)),type:"button"},i(e.cell.player),9,["id","disabled"])};var _=a({components:{Cell:I},setup(){const e=O();return{cells:s((()=>e.state.cells))}}});const R={class:"board"};_.render=function(e,t,r,n,a,s){const i=u("Cell");return o(),l("div",R,[(o(!0),l(p,null,y(e.cells,(e=>(o(),l(i,{key:e.id,cell:e,class:["board__cell",{"board__cell--win":e.hit}]},null,8,["cell","class"])))),128))])};var F=a({setup(){const e=O();return{message:s((()=>"AI: "+(e.state.isAIActivate?"ON":"OFF"))),toggleAi(){e.dispatch("toggleAI")}}}});F.render=function(e,t,r,n,a,s){return o(),l("button",{onClick:t[1]||(t[1]=(...t)=>e.toggleAi&&e.toggleAi(...t)),type:"button"},i(e.message),1)};var S=a({setup(){const e=O();return{resetGame(){e.dispatch("reset")},resetFullGame(){e.dispatch("resetFull")}}}});S.render=function(e,t,r,n,a,s){return o(),l("button",{onClick:t[1]||(t[1]=(...t)=>e.resetGame&&e.resetGame(...t)),onDblclick:t[2]||(t[2]=(...t)=>e.resetFullGame&&e.resetFullGame(...t)),type:"button"},i("Reset Game"),32)};var W=a({components:{ResetButton:S,AIButton:F},setup(){}});const k={class:"footer"};W.render=function(e,t,r,n,a,s){const i=u("AIButton"),d=u("ResetButton");return o(),l("div",k,[c(i,{class:"footer__ai"}),c(d,{class:"footer__reset"})])};var T=a({components:{Header:B,Board:_,Footer:W},setup(){const e=O();return{isGameRunning:s((()=>e.getters.isPlayerSelected))}}});T.render=function(e,t,r,n,a,s){const i=u("Header"),d=u("Board"),y=u("Footer");return o(),l(p,null,[c(i),c(d),c(y)],64)};m(T).use(C,P).mount("#app");
